Firstly, in order to nullify an energy cycle attack, the function string_compare could be modified by adding dummy cycles to the comparing of an incorrect character to make the number of cycles even.  This would in turn allow for the answer of the energy cycle attack to not function, since all the characters would show the exact same amount of energy cycles, this would not let the attack determine any specific character to do more energy cycles than another, thus breaking the attack.

Another option we have, as a general idea, is better to store the passwords hashed, so even if the characters can be known, it is almost impossible to know the original password. 
Hashing a password allows you to have that password encrypted in a non-reversible way (it can be reversed except it would take too much time for it to be viable), and with a specific amount of characters- While the attack is technically still possible, the result would give the hashed password, and that is essentially useless since it can not be reversed.
